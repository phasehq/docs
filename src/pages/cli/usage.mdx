import { Tag } from '@/components/Tag'

export const description =
  'Mange your secrets and environment variables with the Phase CLI'

<Tag variant="small">CLI</Tag>

# Quickstart {{ className: 'lead' }}

The Phase CLI syncs with the [Phase Console](https://github.com/phasehq/console) to provide **End-to-End** encrypted secret management. It pulls, decrypts, and injects secrets into your applications during runtime. Manage secrets for various environments, like development, staging, production, or custom ones, with ease.

### Prerequisites:

- Sign up for the Phase Console and created an application: [Quickstart](/quickstart)
- [Install the CLI](/cli/install)

---

## 1. Login

Authenticate with Phase as a [User](/console/users):

```fish
phase auth
```

This command will give you a drop down selection of all the apps created by you on the [Phase Console](/console/apps). Simply use up / down arrow `↑` and `↓` keys and hit `enter` to select.

Authenticate with Phase via a [Service Token](/console/tokens#service-tokens):

```fish
export PHASE_SERVICE_TOKEN=<YOUR_SERVICE_TOKEN>
```

<div className="not-prose">
  <Button
    href="/cli/commands#auth"
    variant="text"
    arrow="right"
    children="Explore Auth"
  />
</div>

---

## 2. Initialize - _optional_

Link the phase cli to your project. This will create a `.phase.json` file in the root of your application's repository. You may skip this step, but you will have to provide application and environment context manually by passing `--app` and `--env` flags on the `phase secrets` and `phase run` commands.

```fish
# cd /home/git/to_your_project
phase init
```

This command will give you a drop down selection of all the apps created by you on the [Phase Console](/console/apps). Simply use up / down arrow `↑` and `↓` keys and hit `enter` to select.

<div className="not-prose">
  <Button
    href="/cli/commands#init"
    variant="text"
    arrow="right"
    children="Explore Init"
  />
</div>

---

## 3. Import your existing secrets

Let's say you already have a `.env` file containing your secrets and environment variables for your app.

Example:

```fish
> cat .env
AWS_ACCESS_KEY_ID="AKIA2OGYBAH63UA3VNFG"
AWS_SECRET_ACCESS_KEY="V5yWXDe82Gohf9DYBhpatYZ74a5fiKfJVx8rx6W1"

> phase secrets import .env
Successfully imported and encrypted 2 secrets.
To view them please run: phase secrets list

> phase secrets list
KEY 🗝️                    | VALUE ✨
----------------------------------------------------------------------------------------------------
AWS_ACCESS_KEY_ID        | AKI**************NFG
AWS_SECRET_ACCESS_KEY    | V5y**********************************6W1

🥽 To uncover the secrets, use: phase secrets list --show

> rm .env
```

<div className="not-prose">
  <Button
    href="/cli/commands#secrets"
    variant="text"
    arrow="right"
    children="Explore Import"
  />
</div>

---

## 4. Run and inject secrets

```fish
phase run <your_run_command>
```

Example 1:

```fish
# Node.js project manged by yarn package manager
> phase run yarn dev
$ next dev
ready - started server on 0.0.0.0:3000, url: http://localhost:3000
```

Example 2:

```fish
# Chaining multiple commands together with linux pipes
phase run "printenv | grep AWS_ACCESS_KEY_ID"
AWS_ACCESS_KEY_ID=AKIA2OGYBAH63UA3VNFG
```

<div className="not-prose">
  <Button
    href="/cli/commands#run"
    variant="text"
    arrow="right"
    children="Explore Run"
  />
</div>

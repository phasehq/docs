import { Tag } from '@/components/Tag'

export const description =
  'Mange your secrets and environment variables with the Phase CLI'

<Tag variant="small">CLI</Tag>

# Usage

The Phase CLI works together with the [Phase Console](https://github.com/phasehq/console) to securely sync your secrets and environment variables with **End-to-End Encryption**. It is designed to pull secrets, decrypt them and inject secrets directly into your application or framework during runtime. You can use it to create, retrieve, update and delete your application secrets for different environments such as `development`, `staging`, `production` or something custom.

## Get started {{ className: 'lead' }}

### Login

Create an app in the [Phase Console](https://console.phase.dev)

```bash
phase auth
```

### Initialize

Link the phase cli to your project

```bash
phase init
```

This command will give you a drop down selection of all the apps created by you on the [Phase Console](https://console.phase.dev). Simply use up / down arrow `‚Üë` and `‚Üì` keys and hit `enter` to select.

This will create a `.phase.json` file in the root of your application's repository. This file contains important context and non sensitive cryptographic values such as `X25519` public key and encrypted 32 byte salt.

**We recommend that you check this config file in your git repository**.

## Import your existing secrets

Let's say you already have a `.env` file containing your secrets and environment variables for your app.

Example:

```py
DEBUG=True
ALLOWED_HOST = localhost
AWS_ACCESS_KEY_ID = AKIA2OGYBAH6QLWOYDVN
AWS_SECRET_ACCESS_KEY = 6ACbdYki5FISnaiWYZwwyQcAEcnKmNrULTCXw+RQ
REGION = us-east-2
```

You can simply import it via:

```bash
phase secrets import .env
```

## List / view secrets

```bash
phase secrets list --show
```

Example:

```bash
phase secrets list --show
KEY üóùÔ∏è                    | VALUE ‚ú®
--------------------------------------------------------------------------------------
ALLOWED_HOST             | localhost
DEBUG                    | True
AWS_ACCESS_KEY_ID        | AKIA2OGYBAH6QLWOYDVN
AWS_SECRET_ACCESS_KEY    | 6ACbdYki5FISnaiWYZwwyQcAEcnKmNrULTCXw+RQ
REGION                   | us-east-2
```

## Run and inject secrets

```bash
phase run <your_run_command>
```

Example 1:

```bash
# Node.js project manged by yarn package manager
phase run yarn dev

$ next dev
ready - started server on 0.0.0.0:3000, url: http://localhost:3000
```

Example 2:

```bash
# Chaining multiple commands together with linux pipes
phase run "printenv | grep AWS_ACCESS_KEY_ID"

AWS_ACCESS_KEY_ID=AKIA2OGYBAH6QLWOYDVN
```
